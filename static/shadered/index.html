<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width-10px, initial-scale=1.0">
        <title>ShaderEd</title>
        <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="editor.css">
    </head>
    <body>
        <div id="menu">
            <div class="menu-item title">
                <h1>shaderEd</h1>
            </div>
            <div class="menu-item">
                <label for="fontSize">font size:</label>
                <button id="increaseFontSize">+</button>
                <button id="decreaseFontSize">-</button>
            </div>
            <div class="menu-item">
                <label for="vimMode">vim mode:</label>
                <input type="checkbox" id="vimMode" name="vimMode">
            </div>
            <div class="menu-item">
                <label for="shaderType">shader:</label>
                <select id="shaderType">
                    <option value="vertex">vertex shader</option>
                    <option value="fragment" selected>fragment shader</option>
                </select>
            </div>
            <div class="menu-item">
                <label for="snippets">snippets:</label>
                <select id="snippets">
                    <option value="">select a snippet</option>
                </select>
            </div>
            <div class="menu-item">
                <label for="shapeType">shape:</label>
                <select id="shapeType">
                    <option value="sphere">sphere</option>
                    <option value="quad">quad</option>
                    <option value="cube">cube</option>
                </select>
            </div>
            <div class="menu-item">
                <label for="editorTheme">theme:</label>
                <select id="editorTheme">
                    <optgroup label="Light">
                        <!-- Light themes options -->
                    </optgroup>
                    <optgroup label="Dark">
                        <!-- Dark themes options -->
                    </optgroup>
                </select>
            </div>

            <div class="menu-item">
                <button id="toggleShaderError">no compile errors</button>
            </div>

            <div class="menu-item">
                <button id="downloadShader">save shader</button>
            </div>
        </div>

        <div id="editor-container">
            <div id="editor"></div>
            <div id="rendered-view"></div>
        </div>

        <div id="uniformsPanel">
            <p id="uniformHelp">
            Use the controls below to add custom uniforms to your shader. You can also update the value of an existing uniform by adding a new uniform with the same name.
            </br>In addition, the following uniforms the editor sets for you: </br><b>`uTime`, `uResolution`,</b> and <b>`uCameraPosition`</b>.
            </p>
            <div id="controls">
                <input type="text" id="uniformName" placeholder="Uniform Name">
                <select id="uniformType">
                    <option value="float">float</option>
                    <option value="vec2">vec2</option>
                    <option value="vec3">vec3</option>
                    <option value="vec4">vec4</option>
                    <option value="int">int</option>
                    <option value="ivec2">ivec2</option>
                    <option value="ivec3">ivec3</option>
                    <option value="ivec4">ivec4</option>
                    <option value="bool">bool</option>
                    <option value="mat2">mat2</option>
                    <option value="mat3">mat3</option>
                    <option value="mat4">mat4</option>
                    <option value="sampler2D">sampler2D</option>
                </select>
                <input type="text" id="uniformValue" placeholder="Uniform Value">
                <button id="addUniform">Add/Update Uniform</button>
            </div>
            </br></br>
            <table id="customUniforms"></table>
            <button id="toggleUniformsPanel">Toggle Uniforms Panel</button>
        </div>

        <div id="shaderErrorPanel" class="shader-error-panel">
            <div id="shaderErrorContent" class="shader-error-content">
            </div>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="modal">
          <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>How to Use ShaderEd</h2>
            <p>Welcome to ShaderEd! This interactive editor allows you to write and test shaders in real-time.</p>
            <ul>
              <li>Select the shader type from the dropdown menu to start editing.</li>
              <li>Use the editor to write your shader code. The preview updates in real-time.</li>
              <li>Customize your environment using the settings in the top bar.</li>
              <li>Compile Errors: the button at the top that says "no compile errors" will change when a compile error is detected. Compilation happens as you type so check this once you're done typing to see if you're compiling. You can click it to open a panel to see the errors during compilation.</li>
              <li><b>!!IMPORTANT!!</b> Snippets: snippets will be inserted at the cursor location in the editor!</li>
            </ul>
            <p><b>disclaimer!</b>I am a backend Go developer not a front-end JS/CSS/React dev if you hate something I have produced, please open a PR and I'll send you happy vibes!</p>
            <p>enjoy!</p>
          </div>
        </div>


        <!-- External Libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/stats.js/build/stats.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.141.0/build/three.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.141.0/examples/js/controls/OrbitControls.js"></script>

        <!-- Application Scripts -->
        <script src="./main.js" type="module"></script>
    </body>
</html>
